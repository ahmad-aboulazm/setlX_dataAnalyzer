product := procedure(r1, r2) {
    return { [x, z] : [x, y1] in r1, [y2, z] in r2 | y1 == y2 };
};

r := { [n, n*n] : n in [1..100] };

print(product(r, r));


